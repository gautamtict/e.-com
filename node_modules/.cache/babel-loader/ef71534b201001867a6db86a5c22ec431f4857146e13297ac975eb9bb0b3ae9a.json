{"ast":null,"code":"var _jsxFileName = \"/Users/gautamthakur/Documents/closet-store-starter/src/components/ContentGrid.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useRef, useEffect, useCallback } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ContentCard from \"./ContentCard\";\nimport { fetchContents } from \"../features/contentSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ContentGrid() {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    items,\n    status,\n    error,\n    filters\n  } = useSelector(s => s.content);\n  useEffect(() => {\n    if (status === \"idle\") dispatch(fetchContents());\n  }, [status, dispatch]);\n  const filtered = useMemo(() => {\n    if (!items || items.length === 0) return [];\n    const {\n      paid,\n      free,\n      viewOnly,\n      range\n    } = filters.pricing;\n    const [minPrice, maxPrice] = range || [0, 999]; // ✅ safe fallback\n    const pricingActive = paid || free || viewOnly;\n    const lowKeyword = (filters.keyword || \"\").toLowerCase();\n    return items.filter(it => {\n      var _ref, _it$price;\n      const price = (_ref = (_it$price = it.price) !== null && _it$price !== void 0 ? _it$price : it.amount) !== null && _ref !== void 0 ? _ref : 0;\n\n      // Pricing filters\n      let isPaid = price > 0;\n      let isFree = price === 0;\n      let isViewOnly = it.viewOnly || String(it.pricing || \"\").toLowerCase().includes(\"view\");\n      if (pricingActive) {\n        let passed = false;\n        if (paid && isPaid) passed = true;\n        if (free && isFree) passed = true;\n        if (viewOnly && isViewOnly) passed = true;\n        if (!passed) return false;\n      }\n\n      // Price range filter\n      if (paid && (price < minPrice || price > maxPrice)) return false;\n\n      // Keyword filter\n      if (lowKeyword) {\n        const name = (it.userName || it.username || it.user || it.creator || \"\").toLowerCase();\n        const title = (it.title || it.name || \"\").toLowerCase();\n        if (!name.includes(lowKeyword) && !title.includes(lowKeyword)) return false;\n      }\n      return true;\n    });\n  }, [items, filters]);\n\n  // Infinite scroll\n  const PAGE_SIZE = 12;\n  const [visibleCount, setVisibleCount] = useState(PAGE_SIZE);\n  useEffect(() => setVisibleCount(PAGE_SIZE), [filters]);\n  const loaderRef = useRef(null);\n  const handleObserver = useCallback(entries => {\n    const target = entries[0];\n    if (target.isIntersecting) setVisibleCount(prev => Math.min(prev + PAGE_SIZE, filtered.length));\n  }, [filtered.length]);\n  useEffect(() => {\n    const observer = new IntersectionObserver(handleObserver, {\n      root: null,\n      rootMargin: \"0px\",\n      threshold: 0.1\n    });\n    if (loaderRef.current) observer.observe(loaderRef.current);\n    return () => observer.disconnect();\n  }, [handleObserver]);\n  if (status === \"loading\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"center\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 36\n  }, this);\n  if (status === \"failed\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"center\",\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 35\n  }, this);\n  const toRender = filtered.slice(0, visibleCount);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: toRender.map(it => /*#__PURE__*/_jsxDEV(ContentCard, {\n        item: it\n      }, it.id || it._id || Math.random(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), toRender.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: \"No items found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: loaderRef,\n      className: \"loader\",\n      children: visibleCount < filtered.length ? \"Loading more...\" : \"No more items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"count\",\n      children: [\"Showing \", toRender.length, \" of \", filtered.length, \" items\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(ContentGrid, \"VAVOJRMsbh3Jgd1VTg6jWjmlTZA=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = ContentGrid;\nvar _c;\n$RefreshReg$(_c, \"ContentGrid\");","map":{"version":3,"names":["React","useMemo","useState","useRef","useEffect","useCallback","useSelector","useDispatch","ContentCard","fetchContents","jsxDEV","_jsxDEV","ContentGrid","_s","dispatch","items","status","error","filters","s","content","filtered","length","paid","free","viewOnly","range","pricing","minPrice","maxPrice","pricingActive","lowKeyword","keyword","toLowerCase","filter","it","_ref","_it$price","price","amount","isPaid","isFree","isViewOnly","String","includes","passed","name","userName","username","user","creator","title","PAGE_SIZE","visibleCount","setVisibleCount","loaderRef","handleObserver","entries","target","isIntersecting","prev","Math","min","observer","IntersectionObserver","root","rootMargin","threshold","current","observe","disconnect","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toRender","slice","map","item","id","_id","random","ref","_c","$RefreshReg$"],"sources":["/Users/gautamthakur/Documents/closet-store-starter/src/components/ContentGrid.js"],"sourcesContent":["import React, { useMemo, useState, useRef, useEffect, useCallback } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ContentCard from \"./ContentCard\";\nimport { fetchContents } from \"../features/contentSlice\";\n\nexport default function ContentGrid() {\n  const dispatch = useDispatch();\n  const { items, status, error, filters } = useSelector((s) => s.content);\n\n  useEffect(() => {\n    if (status === \"idle\") dispatch(fetchContents());\n  }, [status, dispatch]);\n\n  const filtered = useMemo(() => {\n    if (!items || items.length === 0) return [];\n\n    const { paid, free, viewOnly, range } = filters.pricing;\n    const [minPrice, maxPrice] = range || [0, 999]; // ✅ safe fallback\n    const pricingActive = paid || free || viewOnly;\n\n    const lowKeyword = (filters.keyword || \"\").toLowerCase();\n\n    return items.filter((it) => {\n      const price = it.price ?? it.amount ?? 0;\n\n      // Pricing filters\n      let isPaid = price > 0;\n      let isFree = price === 0;\n      let isViewOnly = it.viewOnly || String(it.pricing || \"\").toLowerCase().includes(\"view\");\n\n      if (pricingActive) {\n        let passed = false;\n        if (paid && isPaid) passed = true;\n        if (free && isFree) passed = true;\n        if (viewOnly && isViewOnly) passed = true;\n        if (!passed) return false;\n      }\n\n      // Price range filter\n      if (paid && (price < minPrice || price > maxPrice)) return false;\n\n      // Keyword filter\n      if (lowKeyword) {\n        const name = (it.userName || it.username || it.user || it.creator || \"\").toLowerCase();\n        const title = (it.title || it.name || \"\").toLowerCase();\n        if (!name.includes(lowKeyword) && !title.includes(lowKeyword)) return false;\n      }\n\n      return true;\n    });\n  }, [items, filters]);\n\n  // Infinite scroll\n  const PAGE_SIZE = 12;\n  const [visibleCount, setVisibleCount] = useState(PAGE_SIZE);\n\n  useEffect(() => setVisibleCount(PAGE_SIZE), [filters]);\n\n  const loaderRef = useRef(null);\n  const handleObserver = useCallback(\n    (entries) => {\n      const target = entries[0];\n      if (target.isIntersecting) setVisibleCount((prev) => Math.min(prev + PAGE_SIZE, filtered.length));\n    },\n    [filtered.length]\n  );\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(handleObserver, { root: null, rootMargin: \"0px\", threshold: 0.1 });\n    if (loaderRef.current) observer.observe(loaderRef.current);\n    return () => observer.disconnect();\n  }, [handleObserver]);\n\n  if (status === \"loading\") return <div className=\"center\">Loading...</div>;\n  if (status === \"failed\") return <div className=\"center\">Error: {error}</div>;\n\n  const toRender = filtered.slice(0, visibleCount);\n\n  return (\n    <div className=\"content-wrapper\">\n      <div className=\"grid\">\n        {toRender.map((it) => (\n          <ContentCard key={it.id || it._id || Math.random()} item={it} />\n        ))}\n      </div>\n      {toRender.length === 0 && <div className=\"center\">No items found.</div>}\n      <div ref={loaderRef} className=\"loader\">\n        {visibleCount < filtered.length ? \"Loading more...\" : \"No more items\"}\n      </div>\n      <div className=\"count\">Showing {toRender.length} of {filtered.length} items</div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}