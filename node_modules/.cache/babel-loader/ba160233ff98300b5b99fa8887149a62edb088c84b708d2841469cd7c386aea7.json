{"ast":null,"code":"// Redux slice: fetch the API once, hold raw data and ui filters\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nconst API_URL = \"https://closet-recruiting-api.azurewebsites.net/api/data\";\nexport const fetchContents = createAsyncThunk(\"content/fetchContents\", async () => {\n  const res = await fetch(API_URL);\n  if (!res.ok) throw new Error(\"Failed to fetch data\");\n  const data = await res.json();\n  return data;\n});\nconst contentSlice = createSlice({\n  name: \"content\",\n  initialState: {\n    items: [],\n    status: \"idle\",\n    error: null,\n    // UI state\n    filters: {\n      pricing: {\n        paid: false,\n        free: false,\n        viewOnly: false // \"View Only\"\n      },\n      keyword: \"\",\n      sort: \"name\" // optional (not used)\n    }\n  },\n  reducers: {\n    setPricing(state, action) {\n      // action.payload = { paid, free, viewOnly } partial\n      state.filters.pricing = {\n        ...state.filters.pricing,\n        ...action.payload\n      };\n    },\n    setKeyword(state, action) {\n      state.filters.keyword = action.payload;\n    },\n    resetFilters(state) {\n      state.filters = {\n        pricing: {\n          paid: false,\n          free: false,\n          viewOnly: false\n        },\n        keyword: \"\",\n        sort: \"name\"\n      };\n    },\n    setFiltersFromUrl(state, action) {\n      // action.payload is full filters object from URL parse\n      state.filters = action.payload;\n    }\n  },\n  extraReducers(builder) {\n    builder.addCase(fetchContents.pending, state => {\n      state.status = \"loading\";\n    }).addCase(fetchContents.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.items = action.payload;\n    }).addCase(fetchContents.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n  }\n});\nexport const {\n  setPricing,\n  setKeyword,\n  resetFilters,\n  setFiltersFromUrl\n} = contentSlice.actions;\nexport default contentSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","API_URL","fetchContents","res","fetch","ok","Error","data","json","contentSlice","name","initialState","items","status","error","filters","pricing","paid","free","viewOnly","keyword","sort","reducers","setPricing","state","action","payload","setKeyword","resetFilters","setFiltersFromUrl","extraReducers","builder","addCase","pending","fulfilled","rejected","message","actions","reducer"],"sources":["/Users/gautamthakur/Documents/closet-store-starter/src/features/contentSlice.js"],"sourcesContent":["// Redux slice: fetch the API once, hold raw data and ui filters\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nconst API_URL = \"https://closet-recruiting-api.azurewebsites.net/api/data\";\n\nexport const fetchContents = createAsyncThunk(\"content/fetchContents\", async () => {\n  const res = await fetch(API_URL);\n  if (!res.ok) throw new Error(\"Failed to fetch data\");\n  const data = await res.json();\n  return data;\n});\n\nconst contentSlice = createSlice({\n  name: \"content\",\n  initialState: {\n    items: [],\n    status: \"idle\",\n    error: null,\n    // UI state\n    filters: {\n      pricing: {\n        paid: false,\n        free: false,\n        viewOnly: false, // \"View Only\"\n      },\n      keyword: \"\",\n      sort: \"name\", // optional (not used)\n    },\n  },\n  reducers: {\n    setPricing(state, action) {\n      // action.payload = { paid, free, viewOnly } partial\n      state.filters.pricing = { ...state.filters.pricing, ...action.payload };\n    },\n    setKeyword(state, action) {\n      state.filters.keyword = action.payload;\n    },\n    resetFilters(state) {\n      state.filters = {\n        pricing: { paid: false, free: false, viewOnly: false },\n        keyword: \"\",\n        sort: \"name\",\n      };\n    },\n    setFiltersFromUrl(state, action) {\n      // action.payload is full filters object from URL parse\n      state.filters = action.payload;\n    },\n  },\n  extraReducers(builder) {\n    builder\n      .addCase(fetchContents.pending, (state) => {\n        state.status = \"loading\";\n      })\n      .addCase(fetchContents.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.items = action.payload;\n      })\n      .addCase(fetchContents.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const { setPricing, setKeyword, resetFilters, setFiltersFromUrl } = contentSlice.actions;\n\nexport default contentSlice.reducer;\n"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAEhE,MAAMC,OAAO,GAAG,0DAA0D;AAE1E,OAAO,MAAMC,aAAa,GAAGF,gBAAgB,CAAC,uBAAuB,EAAE,YAAY;EACjF,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACH,OAAO,CAAC;EAChC,IAAI,CAACE,GAAG,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;EACpD,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,CAAC;EAC7B,OAAOD,IAAI;AACb,CAAC,CAAC;AAEF,MAAME,YAAY,GAAGV,WAAW,CAAC;EAC/BW,IAAI,EAAE,SAAS;EACfC,YAAY,EAAE;IACZC,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,MAAM;IACdC,KAAK,EAAE,IAAI;IACX;IACAC,OAAO,EAAE;MACPC,OAAO,EAAE;QACPC,IAAI,EAAE,KAAK;QACXC,IAAI,EAAE,KAAK;QACXC,QAAQ,EAAE,KAAK,CAAE;MACnB,CAAC;MACDC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE,MAAM,CAAE;IAChB;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAUA,CAACC,KAAK,EAAEC,MAAM,EAAE;MACxB;MACAD,KAAK,CAACT,OAAO,CAACC,OAAO,GAAG;QAAE,GAAGQ,KAAK,CAACT,OAAO,CAACC,OAAO;QAAE,GAAGS,MAAM,CAACC;MAAQ,CAAC;IACzE,CAAC;IACDC,UAAUA,CAACH,KAAK,EAAEC,MAAM,EAAE;MACxBD,KAAK,CAACT,OAAO,CAACK,OAAO,GAAGK,MAAM,CAACC,OAAO;IACxC,CAAC;IACDE,YAAYA,CAACJ,KAAK,EAAE;MAClBA,KAAK,CAACT,OAAO,GAAG;QACdC,OAAO,EAAE;UAAEC,IAAI,EAAE,KAAK;UAAEC,IAAI,EAAE,KAAK;UAAEC,QAAQ,EAAE;QAAM,CAAC;QACtDC,OAAO,EAAE,EAAE;QACXC,IAAI,EAAE;MACR,CAAC;IACH,CAAC;IACDQ,iBAAiBA,CAACL,KAAK,EAAEC,MAAM,EAAE;MAC/B;MACAD,KAAK,CAACT,OAAO,GAAGU,MAAM,CAACC,OAAO;IAChC;EACF,CAAC;EACDI,aAAaA,CAACC,OAAO,EAAE;IACrBA,OAAO,CACJC,OAAO,CAAC9B,aAAa,CAAC+B,OAAO,EAAGT,KAAK,IAAK;MACzCA,KAAK,CAACX,MAAM,GAAG,SAAS;IAC1B,CAAC,CAAC,CACDmB,OAAO,CAAC9B,aAAa,CAACgC,SAAS,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MACnDD,KAAK,CAACX,MAAM,GAAG,WAAW;MAC1BW,KAAK,CAACZ,KAAK,GAAGa,MAAM,CAACC,OAAO;IAC9B,CAAC,CAAC,CACDM,OAAO,CAAC9B,aAAa,CAACiC,QAAQ,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAK;MAClDD,KAAK,CAACX,MAAM,GAAG,QAAQ;MACvBW,KAAK,CAACV,KAAK,GAAGW,MAAM,CAACX,KAAK,CAACsB,OAAO;IACpC,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEb,UAAU;EAAEI,UAAU;EAAEC,YAAY;EAAEC;AAAkB,CAAC,GAAGpB,YAAY,CAAC4B,OAAO;AAE/F,eAAe5B,YAAY,CAAC6B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}